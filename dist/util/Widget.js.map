{"version":3,"sources":["../../src/util/Widget.js"],"names":["Widget","_slot","eve","cb","_checkSlot","slot","push","params","env","that","allEve","eFunc","apply","e","console","error","args","Array","prototype","slice","call","arguments","_doTrigger"],"mappings":";;;;;;;;;;;;AAAA;;;IAGqBA,M;AACnB,oBAAc;AAAA;AAAE;;;;iCACH;AACX,UAAI,CAAC,KAAKC,KAAV,EAAiB;AACf,aAAKA,KAAL,GAAa,EAAb;AACD;AACF;;;uBACEC,G,EAAKC,E,EAAI;AACV,UAAI,OAAOA,EAAP,KAAc,UAAlB,EAA8B,OAAO,IAAP;AAC9B,WAAKC,UAAL;;AAEA,UAAIC,OAAO,KAAKJ,KAAL,CAAWC,GAAX,CAAX;AACA,UAAI,CAACG,IAAL,EAAW;AACT,aAAKJ,KAAL,CAAWC,GAAX,IAAkB,CAACC,EAAD,CAAlB;AACD,OAFD,MAEO;AACLE,aAAKC,IAAL,CAAUH,EAAV;AACD;AACD,aAAO,IAAP;AACD;;;wBACGD,G,EAAK;AACP,WAAKE,UAAL;AACA,aAAO,KAAKH,KAAL,CAAWC,GAAX,CAAP;AACA,aAAO,IAAP;AACD;;;+BACUA,G,EAAKK,M,EAAQC,G,EAAK;AAC3B,WAAKJ,UAAL;AACA,UAAIK,OAAOD,OAAO,IAAlB;;AAEA,UAAIE,SAAS,KAAKT,KAAL,CAAWC,GAAX,CAAb;AACA,UAAI,CAACQ,MAAL,EAAa,OAAO,IAAP;;AALc;AAAA;AAAA;;AAAA;AAO3B,6BAAkBA,MAAlB,8HAA0B;AAAA,cAAjBC,KAAiB;;AACxB,cAAI;AACFA,kBAAMC,KAAN,CAAYH,IAAZ,EAAkBF,MAAlB;AACD,WAFD,CAEE,OAAOM,CAAP,EAAU;AACVC,oBAAQC,KAAR,IAAiBD,QAAQC,KAAR,CAAcF,CAAd,CAAjB;AACD;AACF;AAb0B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAc5B;;AAED;AACA;;;;8BACU;AACR,UAAIG,OAAOC,MAAMC,SAAN,CAAgBC,KAAhB,CAAsBC,IAAtB,CAA2BC,SAA3B,CAAX;AACA,UAAInB,MAAMc,KAAK,CAAL,CAAV;AAAA,UACET,SAASS,KAAKG,KAAL,CAAW,CAAX,CADX;AAEA,UAAIX,GAAJ;;AAEA,UAAI,QAAON,GAAP,yCAAOA,GAAP,OAAe,QAAnB,EAA6B;AAC3BM,cAAMN,IAAIM,GAAV;AACAN,cAAMA,IAAIA,GAAV;AACD;;AAED,aAAO,KAAKoB,UAAL,CAAgBpB,GAAhB,EAAqBK,MAArB,EAA6BC,GAA7B,CAAP;;AAEA,aAAO,IAAP;AACD;;;;;;kBAxDkBR,M","file":"Widget.js","sourcesContent":["/**\n * Widget\n */\nexport default class Widget {\n  constructor() {}\n  _checkSlot() {\n    if (!this._slot) {\n      this._slot = {};\n    }\n  }\n  on(eve, cb) {\n    if (typeof cb !== 'function') return this;\n    this._checkSlot();\n\n    var slot = this._slot[eve];\n    if (!slot) {\n      this._slot[eve] = [cb];\n    } else {\n      slot.push(cb);\n    }\n    return this;\n  }\n  off(eve) {\n    this._checkSlot();\n    delete this._slot[eve];\n    return this;\n  }\n  _doTrigger(eve, params, env) {\n    this._checkSlot();\n    var that = env || this;\n\n    var allEve = this._slot[eve];\n    if (!allEve) return this;\n\n    for (let eFunc of allEve) {\n      try {\n        eFunc.apply(that, params);\n      } catch (e) {\n        console.error && console.error(e);\n      }\n    }\n  }\n\n  // trigger('xxx.ins') 立即触发\n  // trigger('xxx')   异步触发\n  trigger() {\n    var args = Array.prototype.slice.call(arguments);\n    var eve = args[0],\n      params = args.slice(1);\n    var env;\n\n    if (typeof eve === 'object') {\n      env = eve.env;\n      eve = eve.eve;\n    }\n\n    return this._doTrigger(eve, params, env);\n\n    return this;\n  }\n}\n"]}